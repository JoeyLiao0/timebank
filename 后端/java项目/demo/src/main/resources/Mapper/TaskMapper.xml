<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--命名空间写接口-->
<mapper namespace="tb.dao.TaskDao" >

    <select id="selectTaskByStatus" parameterType="java.lang.Integer" resultType="tb.entity.Task">
        select TASK where task_status = #{status};
    </select>

    <select id="selectTaskByPublisherId" parameterType="java.lang.Integer" resultType="tb.entity.Task">
        select TASK where task_publisherid = #{task_publisherId};
    </select>

    <select id="selectTaskByTakerId" parameterType="java.lang.Integer" resultType="tb.entity.Task">
        select TASK where task_takerid = #{task_takerId};
    </select>



    <insert id="publishNewTask"  parameterType="tb.entity.Task" >
        insert into TASK(task_id,task_status,task_result,task_begintime,task_endtime,task_finishtime,
                         task_publisherid,task_takerid,task_coin,task_score,task_audit,task_advice,task_auid)
        values (null,#{task.task_id},#{task.task_status},#{task.task_result},#{task.task_begintime},#{task.task_endtime},#{task.task_finishtime},
                #{task.task_publisherid},#{task.task_takerid},#{task.task_coin},#{task.task_score},#{task.task_audit},#{task.task_advice},#{task.task_auid})
    </insert>

    <insert id="InsertTask"  parameterType="tb.entity.Task" >
        insert into TASK(task_id,task_status,task_result,task_begintime,task_endtime,task_finishtime,
                         task_publisherid,task_takerid,task_coin,task_score,task_audit,task_advice,task_auid)
        values (null,#{task.task_id},#{task.task_status},#{task.task_result},#{task.task_begintime},#{task.task_endtime},#{task.task_finishtime},
                #{task.task_publisherid},#{task.task_takerid},#{task.task_coin},#{task.task_score},#{task.task_audit},#{task.task_advice},#{task.task_auid})
    </insert>


    <update id="UpdateTask" parameterType="tb.entity.Task">
        update TASK
        set task_status = #{task.task_status},
            task_result = #{task.task_result},
            task_begintime = #{task.task_begintime},
            task_endtime =#{task.task_endtime},
            task_finishtime = #{task.task_finishtime},
            task_publisherid = #{task.task_publisherid},
            task_takerid = #{task.task_takserid},
            task_coin = #{task.task_coin},
            task_score = #{task.task_score},
            task_audit = #{task.task_audit},
            task_advice = #{task.task_advice},
            task_auid = #{task.task_auid}
        where ad_id = #{ad.ad_id}
    </update>


    <delete id="DeleteTaskById" parameterType="java.lang.Integer">
        delete from TASK
        where task_id = #{id}
    </delete>


    <delete id="DeleteTask" parameterType="tb.entity.Task">
        delete from TASK
        where task_id = #{task.task_id}
    </delete>


</mapper>